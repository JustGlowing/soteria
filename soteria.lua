-- title:  Soteria
-- author: JustGlowing
-- desc:   Save them all!
-- script: lua

frames = 0

function solid(x, y)
  return solids[mget((x)//8+levels[level].mapx, (y)//8+levels[level].mapy)]
end

function hit_door(x, y)
  return mget((x)//8+levels[level].mapx, (y)//8+levels[level].mapy) == 97
end

function hit_hazard(x, y)
  return hazard[mget((x)//8+levels[level].mapx, (y)//8+levels[level].mapy)]
end

function init()
  intro_music=1
  game_over_music=0

  jump_sound=2
  magic_sound=0
  lem_dead_sound=3

  music(intro_music, -1, -1, false)
  solids={[33]=true, [34]=true, [49]=true, [50]=true}
  hazard={[25]=true, [26]=true}

  levels={[0]={mapx=0, mapy=1, startpx=20, startpy=30, start_lemx=10, start_lemy=0, 
  enemies_positions={}}, 
  [1]={mapx=30, mapy=1, startpx=20, startpy=30, start_lemx=10, start_lemy=0, 
  enemies_positions={}}, 
  [2]={mapx=60, mapy=1, startpx=112, startpy=0, start_lemx=10, start_lemy=0, 
  enemies_positions={{x=112, y=120}, {x=218, y=40}}}, 
  [3]={mapx=90, mapy=1, startpx=20, startpy=30, start_lemx=10, start_lemy=0, 
  enemies_positions={}}, 
  [4]={mapx=120, mapy=1, startpx=20, startpy=10, start_lemx=80, start_lemy=0, 
  enemies_positions={}}, 
  [5]={mapx=150, mapy=0, startpx=20, startpy=5, start_lemx=10, start_lemy=0, 
  enemies_positions={{x=218, y=60}}},
}

score=0
dead_lems=0
num_lems=10
mode='menu'
level=3

p={
  x=20, 
  y=30, 
  sprite_idx=0, 
  sprite_jump=7, 
  sprite_dead=37, 
  sprite={[1]=1, [2]=3, [3]=5}, 
  w_sprite=2, 
  h_sprite=2, 
  w=2*8-1, 
  h=2*8-1, 
  vx=0, 
  vy=0, 
  colorkey=0, 
  orientation = 1, 
  kick=false, 
  dead=false, 
  d=2
}
frames=0
wait_frames = 20 -- to wait before game over

lems={}
enemies={}
gameover_music_plaied=false

camera={
  x=0, 
  y=0
}
end

function place_enemies()
for i, v in ipairs(levels[level].enemies_positions) do
  local enemy={
    x=v.x, 
    y=v.y, 
    vx=.5, 
    vy=0, 
    orientation=1, 
    colorkey=0, 
    sprite1=113
  }
  table.insert(enemies, enemy)
end
end

function place_lems(start_x, start_y, step)
for i=0, num_lems-1 do
  start_x=start_x+step
  local lem={
    x=start_x, 
    y=start_y, 
    vx=.5, 
    vy=0, 
    orientation=1, 
    sprite1=9, 
    sprite_dead=11, 
    dead=false
  }
  table.insert(lems, lem)
end
end

function debug_print()
rect(p.x, p.y, 1, 1, 6)
rect(p.x+p.h, p.y, 1, 1, 5)
rect(p.x, p.y+p.w, 1, 1, 5)
rect(p.x+p.h, p.y+p.w, 1, 1, 5)
rect(p.x+7+p.vx, p.y+p.vy, 1, 1, 5)
rect(p.x+p.w+p.vx, p.y+7+p.vy, 1, 1, 5)
rect(p.x+7+p.vx, p.y+p.w+p.vy, 1, 1, 6)
rect(p.x+p.vx, p.y+7+p.vy, 1, 1, 5)

print(tostring(p.x) .. ", " .. tostring(p.y) .. ", " .. tostring(p.orientation) .. ", " .. tostring(dead_lems), 112, 0)
for _, lem in ipairs(lems) do
  rect(lem.x, lem.y, 1, 1, 6)
end

for _, ene in ipairs(enemies) do
  rect(ene.x, ene.y, 1, 1, 11)
end
end

function update_enemy()
for i, enemy in ipairs(enemies) do
  if solid(enemy.x+enemy.vx, enemy.y+enemy.vy)
  or solid(enemy.x+enemy.vx, enemy.y+7+enemy.vy) then
    if enemy.vy==0 then
      enemy.vx=.5
      enemy.orientation=1
    end
  end

  if solid(enemy.x+7+enemy.vx, enemy.y+enemy.vy) or
  solid(enemy.x+7+enemy.vx, enemy.y+7+enemy.vy) then
    if enemy.vy==0 then
      enemy.vx=-.5
      enemy.orientation=0
    end
  end

  if solid(enemy.x, enemy.y+8+enemy.vy)
  or solid(enemy.x+7, enemy.y+8+enemy.vy) then
    enemy.vy=0
  else
    enemy.vy=enemy.vy+0.2
  end

  if enemy.vy<0 and (solid(enemy.x+enemy.vx, enemy.y+enemy.vy)
  or solid(enemy.x+7+enemy.vx, enemy.y+enemy.vy)) then
    enemy.vy=0
  end

  if box_hit(p.x, p.y, p.w, p.w, enemy.x, enemy.y, 8, 8) then
    p.dead=true
  end

  --if p.kick and math.abs(enemy.x-p.x)<8 and math.abs(enemy.y-p.y-8)<8 then
    --sfx(0, 60, 8)
    --table.remove(enemies, i)
  --end

  enemy.x=enemy.x+enemy.vx
  enemy.y=enemy.y+enemy.vy
end
end

function box_hit(x1, y1, w1, h1, x2, y2, w2, h2)
local xd=math.abs((x1+(w1/2))-(x2+(w2/2)))
local xs=w1*0.5+w2*0.5
local yd=math.abs((y1+(h1/2))-(y2+(h2/2)))
local ys=h1/2+h2/2
if xd<xs and yd<ys then
  return true
end

return false
end

function update_lem()
for i, lem in ipairs(lems) do
  if solid(lem.x+lem.vx, lem.y+lem.vy)
  or solid(lem.x+lem.vx, lem.y+7+lem.vy) then
    if lem.vy==0 then
      lem.vx=.5
      lem.orientation=1
    end
  end

  if solid(lem.x+7+lem.vx, lem.y+lem.vy) or
  solid(lem.x+7+lem.vx, lem.y+7+lem.vy) then
    if lem.vy==0 then
      lem.vx=-.5
      lem.orientation=0
    end
  end

  if solid(lem.x, lem.y+8+lem.vy)
  or solid(lem.x+7, lem.y+8+lem.vy) then
    lem.vy=0
  else
    lem.vy=lem.vy+0.2
  end

  if lem.vy<0 and (solid(lem.x+lem.vx, lem.y+lem.vy)
  or solid(lem.x+7+lem.vx, lem.y+lem.vy)) then
    lem.vy=0
  end

  if p.kick and p.orientation==0
  and math.abs(lem.x-p.x)<8 and math.abs(lem.y-p.y-8)<8 then
    lem.vy=-3.
    lem.vx=-1.
    lem.orientation=p.orientation
  end

  if p.kick and p.orientation==1
  and math.abs(lem.x-(p.x+p.w))<8 and math.abs(lem.y-p.y-8)<8 then
    lem.vy=-3.
    lem.vx=1.
    lem.orientation=p.orientation
  end

  if lem.dead == false then
    lem.x=lem.x+lem.vx
    lem.y=lem.y+lem.vy
  end

  if hit_door(lem.x, lem.y) then
    score=score+1
    table.remove(lems, i)
  end

  if lem.dead == false and hit_hazard(lem.x, lem.y) then
    dead_lems=dead_lems+1
    lem.dead=true
    sfx(lem_dead_sound, 30, 12)
  end

  for _, ene in ipairs(enemies) do
    if lem.dead == false and box_hit(lem.x, lem.y, 8, 8, ene.x, ene.y, 8, 8) then
      dead_lems=dead_lems+1
      lem.dead=true
      sfx(lem_dead_sound, 30, 12)
    end
  end
end

if frames%30 == 0 then -- clear dead lems every 30 frames
  for i, lem in ipairs(lems) do
    if lem.dead then
      table.remove(lems, i)
    end
  end
end
end

function update_player()
p.kick=false
if btn(2) then
  p.vx=-1
  p.orientation = 0
elseif btn(3) then
  p.vx=1
  p.orientation = 1
else
  p.vx=0
end

if p.vy==0 and btnp(4) then
  sfx(jump_sound, 60, 18)
  p.vy=-2.5
end

if solid(p.x+p.vx, p.y+p.vy)
or solid(p.x+p.w+p.vx, p.y+p.vy)
or solid(p.x+p.vx, p.y+p.h+p.vy)
or solid(p.x+p.w+p.vx, p.y+p.h+p.vy)
or solid(p.x+7+p.vx, p.y+p.vy)
or solid(p.x+p.w+p.vx, p.y+7+p.vy)
or solid(p.x+p.vx, p.y+7+p.vy)
then
  p.vx=0
end

if solid(p.x, p.y+p.h+p.vy+1)
or solid(p.x+p.w, p.y+p.h+p.vy+1)
or solid(p.x+7+p.vx, p.y+p.h+1+p.vy) then
  p.vy=0
else
  p.vy=p.vy+0.15
end

if btnp(5) then
  sfx(magic_sound, 30, 12)
  p.kick=true
end

if p.vy<0 and (solid(p.x+p.vx, p.y+p.vy)
or solid(p.x+p.w+p.vx, p.y+p.vy)) then
  p.vy=0
end

if hit_hazard(p.x, p.y) or hit_hazard(p.x+p.h, p.y+p.w) then
  p.dead = true
end

p.x=p.x+p.vx --locked in the middle of the screen 112
p.y=p.y+p.vy
end

function walking_animation()
if p.vx ~= 0 then
  p.d=p.d-1
  if p.d<0 then
    p.sprite_idx=p.sprite_idx+1
    if p.sprite_idx > 3 then p.sprite_idx=1 end
    p.d=2
  end
else
  p.sprite_idx=1
end
end

function wait_before_gameover()
wait_frames = wait_frames-1
if wait_frames < 0 then
  mode = 'gameover'
end
end

function draw_sprites()
walking_animation()
if p.vy ~= 0 then
  spr(p.sprite_jump, p.x, p.y, p.colorkey, 1, p.orientation, 0, p.w_sprite, p.h_sprite)
else
  spr(p.sprite[p.sprite_idx], p.x, p.y, p.colorkey, 1, p.orientation, 0, p.w_sprite, p.h_sprite)
end

if p.kick == true then
  if p.orientation == 0 then
    spr(67, p.x-3, p.y+8, p.colorkey, 1, p.orientation, 0)
  else
    spr(67, p.x+11, p.y+8, p.colorkey, 1, p.orientation, 0)
  end
end

if p.dead then
  spr(p.sprite_dead, p.x, p.y, p.colorkey, 1, p.orientation, 0, p.w_sprite, p.h_sprite)
end

for _, lem in pairs(lems) do
  if lem.dead == false then
    spr(lem.sprite1+(frames%60//30*2)/2, lem.x, lem.y, lem.colorkey, 1, lem.orientation, 0)
  else
    spr(lem.sprite_dead, lem.x, lem.y, lem.colorkey, 1, lem.orientation, 0)
  end
end

for _, ene in ipairs(enemies) do
  spr(ene.sprite1+(frames%60//30*2)/2, ene.x, ene.y, ene.colorkey, 1, ene.orientation, 0)
end

--print("score " .. tostring(score), 4, 0)
end

function reset_leve()
p.x=levels[level].startpx
p.y=levels[level].startpy
p.dead=false
dead_lems=0
score=0
lems={}
enemies={}
place_lems(levels[level].start_lemx, levels[level].start_lemy, 10)
place_enemies()
end

init()
function TIC()
frames = frames + 1
if mode == 'game' then
  if p.dead == false then
    update_player()
    update_lem()
    update_enemy()
    cls()
    camera.x=camera.x-p.vx
    map(levels[level].mapx, levels[level].mapy)
  else
    wait_before_gameover()
  end
  draw_sprites()
end

if mode == 'menu' then
  cls()
  map(0, 1)
  print('Soteria', 75, 35, 15, 1, 2)
  print('Press X to start', 70, 55, 15, 1, 1)
  print('Arrows - move around', 60, 80, 15, 1, 1)
  print('     Z - jump', 60, 90, 15, 1, 1)
  print('     X - make them jump!', 60, 100, 15, 1, 1)

  if btnp(5) then
    mode='game'
    reset_leve()
  end
end

if mode == 'gameover' then
  cls()
  map(180, 120)
  if gameover_music_plaied == false then
    music(game_over_music, -1, -1, false)
    gameover_music_plaied=true
  end
  print('Ouch!', 75, 30, 15, 1, 2)
  print('You need to save at least 5 of them', 10, 60, 15, 1, 1)
  print('Press X to restart the level', 10, 90, 15, 1, 1)
  if btnp(5) then
    mode='game'
    reset_leve()
    music() -- stops any music
  end
end

if mode == 'nextlevel' then
  cls()
  map(210, 120)
  print('Well done!', 35, 30, 15, 1, 2)
  
  print('You saved ' .. tostring(score) .. ' of them', 20, 70, 15, 1, 1)
  print('Press X to go to the next level', 20, 90, 15, 1, 1)
  if btnp(5) then
    mode='game'
    level=level+1
    reset_leve()
  end
end

if dead_lems + score == num_lems then
  if score < 5 then
    mode='gameover'
    reset_leve()
  else
    mode='nextlevel'

  end
end
--debug_print()
end

-- <TILES>
-- 000:a7aaaaaaa7aaaaaaa77aaaaa77777777aaaaa7aaaaaaa7aaaaaaa77a77777777
-- 001:00000888000088880008888800888888008a8ffc0088a2fc008a8ccc0088accc
-- 002:88880000888680008888d80088888680cff88880c2f88880cccc8880cccc8880
-- 003:00000888000088880008888800888888008a8ffc0088a2fc008a8ccc0088accc
-- 004:88880000888680008888d80088888680cff88880c2f88880cccc8880cccc8880
-- 005:00000888000088880008888800888888008a8ffc0088a2fc008a8ccc0088accc
-- 006:88880000888680008888d80088888680cff88880c2f88880cccc8880cccc8880
-- 007:00000888000088880008888800888888008a8ffc0088a2fc008a8ccc0088accc
-- 008:88880000888680008888d80088888680cff88880c2f88880cccc8880cccc8880
-- 009:022222200cccccc2c2fcc2f2cffccff20cc2ccc20cccccc000c00c6006600060
-- 010:022222200cccccc2c2fcc2f2cffccff20cc2ccc20cccccc0000c0c0000666600
-- 011:022222202cccccc2cffccf2cc2fccffc0cc22cc000cccc0006c00c6000600600
-- 012:022222200cccccc2c2fcc2fccffccffc0cc2ccc20cc2ccc0006c6c0000060600
-- 016:aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
-- 017:000888c60000ffff00000fff66ffffaa6e444aaa664cc4440000a4440000ccc0
-- 018:6cc88800affff000afff0000aaaffff0aaaafcc0aaaafcc0aaaaa00000ccc000
-- 019:000888c60000ffff00000fff66ffffaa6e444aaa664cc4440000c44400000c00
-- 020:6cc88800affff000afff0000aaafff00aaafcc00aaafcc00aaaaa00000ccc000
-- 021:000888c60000ffff00000fff66ffffaa6e444aaa664cc4440000a4440000ccc0
-- 022:6cc88800affff000afff0000aaaffff0aaaafcc0aaaafcc0aaac000000c00000
-- 023:000888c66660ffff6e600fff6644ffaa004c44aa0000c44400000c440000c000
-- 024:6cc88800affff000afff0000aaaffff0aaaafcc0aaaafcc0aaac000000c00000
-- 025:a9a9a9a996969696666666666666666666666666666666666666666666666666
-- 026:ddddddddd8d8d8d88d8d8d8d8888888888888888888888888888888888888888
-- 033:effffffdfdddddddfdddddddfdddddddfdddddddfdddddddfddddddddddddddd
-- 035:aaaaaaaaaaaaaaaaa66aa664a2266224a6622664aaa66aa4aaaaaaa4aaaaaaa4
-- 037:00000888000088880008888800888888008a82fc0088affc008a8ccc0008accc
-- 038:88800000888680008888d80088888600cff88880cf288880cccc8880cccc8800
-- 039:000eeeee00eeeeee0eeeeeee0ecccccc0effffff0cff2fff0cff2fff0cff2fff
-- 040:eeeee000e66e6600e6666600c66666e0f66c66e02ffceee02ffceee02ffceee0
-- 041:7744444474dddddd4dd222224d2222224dcccccc4dcfffff4dcf1ff14dcf1ff1
-- 042:44444477dddddd47266d66d4266666d4c66666d4f66266d4ffc22dd4ffc22dd4
-- 043:7744444474dddddd4ddddddd4ddeeeee4ddccccc4ddcffff4ddcf2ff4ddcf2ff
-- 044:44444477dddddd47ddddddd4eeedddd4ccceddd4ffceddd42fceddd42fceddd4
-- 053:066688c606e4ffff06644fff0ccf44aa0fffaaaa000ccaaa00000caa000000c0
-- 054:6cc88800affff000affffcc0aaaffcc0aaaafff0aaaac000aaac000000c00000
-- 055:0cffffff0ccccccc0ccc6ccc0cccc6660ccccccc022222220022200000111000
-- 056:fffceee0cccceee06ccceee0cccceee0cccceee0222200002220000011100000
-- 057:4dcfffff4dcccccc4dcc6ccc4dccc6664dcccccc4ddccccc74dddccc77444444
-- 058:ffc22dd4ccc22dd46cc22dd4ccc22dd4ccc22dd4ccd22dd4ddd22d4744444477
-- 059:4ddcffff4ddccccc4ddcc6cc4ddccc664ddccccc4dddcccc74ddddcc77444444
-- 060:ffceddd4ccceddd4cccdddd46ccdddd4cccdddd4ccddddd4cddddd4744444477
-- 065:000000000000000000000000000ff000000ff000000000000000000000000000
-- 066:000000000000000000f00f00000ee000000ee00000f00f000000000000000000
-- 067:e000e00e0f0000f000e00e00000ee00ee00ee00000e00e000f0000f0e00e000e
-- 068:e000000e000000000000000000000000000000000000000000000000e000000e
-- 073:7744444474dddddd4ddddddd4ddddddd4ddddddd4ddd222d4dd26f624dd2f666
-- 074:44444477dddddd47ddddddd4ddddddd4ddddddd4dd222dd4d26672d4266672d4
-- 075:7744444474dddddd4dddddee4ddddecc4dddeccc4ddde0004dddec004ddddccc
-- 076:44444477dddddd47eeddddd4ccedddd4cccdddd4000dddd4c00dddd4cccdddd4
-- 081:0000bb00000b0b0000b00660066066f666f60666666606600660000000000000
-- 082:0000000000000b00000000b00000066000006f600006f6700666670000777000
-- 083:000000000000000000000000b606606bf660666fbf0660fb0bffffb000bbbb00
-- 084:000000000b0b0b0000bbb000009b940009494940049494400949494000444400
-- 085:99900000444990006f644900fff664906f666490666bff496fb66f496ff66649
-- 086:000000000f0000f00ff999f00ff999f00f9999f00ff999f00f9999f007ffff70
-- 089:4dd266664ddd26664dddd2664ddddd264dddddd24ddddddd74dddddd77444444
-- 090:666672d466672dd46672ddd4672dddd472ddddd42dddddd4dddddd4744444777
-- 091:4ddddccc4ddddccc4dddddcc4ddddddc4ddd888c4dd8888874d8888877444444
-- 092:6ccdddd4cccdddd4ccddddd4cdddddd4c888ddd488888dd488888d4744444477
-- 097:aaddddaaad5555dad666666ddeeeeeeddccccccddbbbbbbdd999999dd888888d
-- 105:7744444474dddddd4ddd44444dd444444dd44ccc4dd44c2f4dd44cff4dd44c6c
-- 106:44444477dddddd4744a4add4444e4dd4cca4add4c2f44dd4cff44dd4c6c44dd4
-- 107:7744444474dddddd4ddddddd4dddd1cc4ddd1ccc4ddd1c2f4ddddcff4ddddccc
-- 108:44444477dddddd47ddddddd4cc1dddd4ccc1ddd4c2f1ddd4cffdddd4cccdddd4
-- 113:000bb000000eb00000bbb00000bebb0000bbbb000beebbb00bbbbbb00eeeeee0
-- 114:0000b000000eb000000bb00000ebbbb0bbbbb50b0bebbb000bbbbbb00eeeeee0
-- 121:4dd44cc64dd44ccc4dd444cc4dd4444c4dd4fffc4ddfffff74dfffff77444444
-- 122:6cc44dd4ccc44dd4cc444dd4c4444dd4cfff4dd4fffffdd4fffffd4744444477
-- 123:4ddddc364dddd3c34ddddd3c4ddddddc4dddaaac4ddaaaaa74daaaaa77444444
-- 124:6c3dddd4c3cdddd43cddddd4cdddddd4caaaddd4aaaaadd4aaaaad4744444477
-- 129:0000000004040000099900040e9e000449999999999997990040904900409049
-- 130:0000000004040000099900040e9e000449999999099997999040904904009049
-- </TILES>

-- <MAP>
-- 000:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 001:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000001212121212121212121212121212120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:121212121212121212121212121212120000121212121212121212121212121212121212121212121212121212121212121212121212121212000012121212121212121200000000000000000000000000001212121212121212121212121212121212121212121200001200000000000000000000000012120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000001200000000000000000000000012120000000000000000000000000000000000000000000000001200000012120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:12000000000094a4000000000000000000000000000094a4000000000012000000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012120000001212121212121212121212121200000000000096a60000000012120000000000000000000012121212121212121212121212121200000012121212001200120012001200120012001200000000000000000000000012000000000000000000000000000000000000000000000000000000000000121212121212121212121212121212121212121212121212121212121212
-- 005:12000000000095a5000000000000000000000000000095a5000000000012000000000000000000000000000000000000000000000000000000000012120000000000000000120000000000000000000012000000000000000012120000000000000000000000000000000000000000000097a70000000012120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000012120000000000000000121212121212121212121212000000000000000012120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000120012001200000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 007:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000001212120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012120000000000001291911212121212121212121212121200000000000012120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000001212121212121212120000121212121212121212121212121212121212000012121212120000000000000000000000000000000000000000000000000000000012120000000000001212121212121212121212121212121200000000000012120000000000000000000000000000120000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:1200000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000012a1a11212121212120000000000000000000000000000000000000000000000000000000012120000000000000000000000000012000000001200000000000000000012121212121200001200000000000000000000000000000000000000000012120000000000001200120012001200121212121212121212121212121212000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:1212121200000000000000000000000000000000000000000000000000120000b2c20000000000000000000000000000001212121212121212121212120000120012120000000000000000000000000000000012121212000012120000000000000000000000000012911291121200000000000000000012120000000000001200000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:1212121212000000000000000000000000000000000000000000000000120000b3c30000000000000000000000001212121212121212121212121212120000000000000000000000000092a20000000000000000000000000012120000000000000000000012121212121212121200000000000000000012120000000012121200000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:121212121212000000000000000000000000000000000000000000000012000000000000000000000000001212121212121212121212121212121212121212120000121212120000000093a30000000012121212000012121212120000000000000012121212121212121212121200000000000000000012120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:121212121212120000000000000000000000000000000000000032000012000000000000000000001212121212121212121212121212121212121212120000000000000000000000000000000000000000000000000000000012120000000012121212121212121212121212121200000000000000000012120000000000000000000000000000000000000000000000000000000012120000000000000000000000000000000000000000000000120000001612000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:121212121212121200000000000000000000000000000000000012000012000000000000001212121212121212121212121212121212121212121212120000120012120000121212120000000012121212000012121212000012121212121212121212121212121212121212121200000000000000000012120000000000000000000000000000000000000000000000160000000012121212120012001200120012000000120012001200120012121212121212000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:121212121212121212000000000000000000000000000000000012001612001600001212121212121212121212121212121212121212121212121212120000000000000000000000000000000000000000000000000000000012121212121212121212121212121212121212121200000012121200160012121212121212121212121212121291919112000000129191121212121212000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 016:121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212120016000000000000000000000000000000000000000000000000160012121212121212121212121212121212121212121291919112121212121212121212121212121212121212121212121212121212121212121212121212919191919191919191919191919191919191919191919191919191919191000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 017:121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 018:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 019:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 020:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 021:120000000000000000000000000000000000000000007080000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 022:120000000000000000000000000000000000000000007181000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 023:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 024:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 025:120000000000000000000000009000a0009000a000900000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 026:120000001212120000000000121212121212121212121212121200000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 027:120000001200000000000000000000000000000000000000001200000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 028:120000001200000000000000000000000000000000000000001200000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 029:121212121200000000000000000000000000000000000000001212121212000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 030:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 031:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 032:120000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 033:121212121212919191919191919191919191919191919191121212121212000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 123:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b6c6000000000000000000000000000000000000000000000000000000b4c40000000000
-- 124:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b7c7000000000000000000000000000000000000000000000000000000b5c50000000000
-- </MAP>

-- <WAVES>
-- 000:ff00000000000000ff00000000000000
-- 001:0123456789abcdeffedcba9876543210
-- 002:ffffffff00000000ffffffff00000000
-- 003:0123456789abcba9abcdedcba9876543
-- </WAVES>

-- <SFX>
-- 000:039013a023b023c033d033e043f043f053f053b063b063b073f073f073f073b083b083b083f093f093f093b093b0a3b0a3f0b3f0c3f0d3b0e3b0f3b0b67000000000
-- 001:020002010202020302030203020202010200020f020e020d020d020e020f0201020202030203020302020201020f020e020d020d020d020e020f020030700000000f
-- 002:920872187228723872497259726a727a728b729c72ad72be72cf82d092e2b2f3d2f6e2f7e2f0f2f0f2f0f2f0f2f0f2f0f2f0f2f0f2f0f2f0f2f0f2f0b07000000000
-- 003:7207720672067205720572047204720472037203720372027202720272017200720f720f720e720e720d720d720c720c720b720b720a720a7209f208229000000000
-- 004:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000409000000000
-- 005:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000
-- </SFX>

-- <PATTERNS>
-- 000:000000000000d00044000000900044000000600044000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 001:000000000000800044000000900044000000d00044000000000000b00044000000000000f00044000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </PATTERNS>

-- <TRACKS>
-- 000:100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010
-- 001:200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020
-- </TRACKS>

-- <PALETTE>
-- 000:140c1c44243430346d4e4a4e854c30346524d04648757161597dced27d2c8595a16daa2cd2aa996dc2cadad45edeeed6
-- </PALETTE>

